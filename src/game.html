<html>

<head>
    <title>Game</title>
    <link rel="stylesheet" href="app.css">
    <link rel="stylesheet" href="game.css">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script>
        function formatNumber(number) {
            if (number >= 1000000000) {
                return (number / 1000000000).toFixed(1) + 'B';
            } else if (number >= 1000000) {
                return (number / 1000000).toFixed(1) + 'M';
            } else if (number >= 1000) {
                return (number / 1000).toFixed(1) + 'K';
            } else if ((number * 10) % 10 != 0) {
                return number.toFixed(1).toString();
            } else {
                return number.toString();
            }
        }

        if (localStorage.getItem("playthroughs")) {
            var count = parseInt(localStorage.getItem("playthroughs"));
            localStorage.setItem("playthroughs", count + 1);
        } else {
            localStorage.setItem("playthroughs", 1);
        }
    </script>
</head>

<body onclick="console.log('click')">
    <div id="screenfilter" class="screenfilter screenfilter_unpaused">
    </div>
    <div id="screen" class="cell_div">
    </div>
    <div id="background_img">
    </div>

    <div id="status_zone">
        <div class="cell_div" id="options_div">
            <a href="javascript:pause();"><span id="pause">PAUSE</span></a> -
            Speed <a href="javascript:speed();"><span id="speed">x1</span></a> -
            <a href="difficulty.html">retry</a>
        </div>

        <div class="cell_div" id="time_div">
            <span id="date"></span>
            <span class="vertical_only"> /2150</span>
            <span class="horizontal_only">

                <br />Time to 2150 (WIN): <span id="timer">...............</span>
            </span>
        </div>

        <div class="cell_div" id="points_div">
            $ignaling..: +$<span id="s_points" class="number number_good"></span>(+<span id="s_income"></span>$/s)
            <span class="hide_confirmation">
                <br />
                $train.....: -$<span id="c_points" class="number number_bad"></span><br />
                ---------------------------<br />
                $uffering..: -$<span id="differencial" class="number"></span>
            </span>
        </div>

        <div class="cell_div hide_normalization" id="alerts_div">

            <span class="vertical_only"> 100 $uffering = 1 death</span>
            <span class="horizontal_only">
                $uffering kills ($100 = 1 life)<br />
            </span>

            Next alert:
            <span class="vertical_only"><br /></span>
            <input type="range" min="0" max="0" value="0" id="compassion_slider" oninput="changeCompassionSlider()"
                disabled="true" style="width:55px"> <span id="compassion_fade">1</span> deaths<br />

            <span id="disaster"></span>
        </div>

        <div class="cell_div hide_normalization" id="population_div">
            Population: <span id="population"></span> <span class="horizontal_only">(LOSE if 0)</span>
        </div>
    </div>


    <div id="action_zone">
        <div id="action_column_exploit">
            <div class="cell_div" id="carbon_capture_div" style="text-align:center;">
                <input type="button" id="carbon_capture_button" value="Carbon capture (+1$)" onclick="clicker();" />
            </div>

            <div class="cell_div" id="carbon_capture_div_alternative" style="display:none;opacity: 0.5;">
                No virtue signaling in IMPOSSIBLE<br />
                <input type="button" value="Carbon capture (+1$)" onclick="clicker();" disabled="true" />
            </div>

            <div class="cell_div" id="portfolio_div">
                <h3>Current portfolio</h3>
                <ul id="portfolio">
                </ul>
            </div>
        </div>

        <div id="action_column_explore">
            <div class="cell_div" id="marketplace_div">
                <h3>Marketplace of ideas</h3>
                Licensing fee: $<span id="licensing_fee"></span>
                <ul id="marketplace">
                </ul>
            </div>

            <div class="cell_div" id="politics_div" style="display:none;">
                <h3>Political Grand Narratives</h3>
                High cost, unpredictable results with very high potential
                <span id="politics_cooldown"></span>
                <ul id="politics">
                </ul>
            </div>
        </div>
    </div>


    <div class="popup redbox" id="popup">
        <h2>ALERT</h2>
        <span id="death_report"></span><br /><br />
        <span id="compassion_slider_disclaimer" style="display:none;">You can change your threshold for compassion
            fade
            to see this less often
            with the slider on the
            <span class="horizontal_only">bottom</span><span class="vertical_only">top</span>
            right.</span><br />
        <input type="button" value="Dismiss" onclick="dismissPopup();" />
    </div>

    <div class="popup redbox" id="popup_lose">
        <h1>DEFEAT</h1><br />
        You could not save humanity from self-annihilation :(<br />
        Bummer.<br />
        But in this simulation, contrary to real life, you get to try again!<br />
        <h2>If you struggle, consider changing the difficulty!</h2>
        <h1><a href="difficulty.html">Try again!</a></h1>
    </div>

    <div class="popup bluebox" id="popup_win">
        <h1>VICTORY</h1><br />
        Congratulations, you managed to reclaim political agency and survive the most dangerous century in the
        history
        of mankind.<br />
        Perhaps all hope is not lost after all.<br />
        Then again this is not real life.<br />
        <br />
        If you found this game interesting, please consider visiting
        <a href="https://www.yo252yo.com" target="_blank">yo252yo.com</a>
        for more free experimental multimedia projects!
    </div>


    <script src="game_points.js" defer></script>
    <script src="game_actions.js" defer></script>
    <script src="game_io.js" defer></script>

</body>

</html>