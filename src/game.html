<html>

<head>
    <title>Game</title>
    <link rel="stylesheet" href="app.css">
    <link rel="stylesheet" href="game.css">
    <meta name="viewport" content="initial-scale=1">
    <script>
        function formatNumber(number) {
            if (number >= 1000000000) {
                return (number / 1000000000).toFixed(1) + 'B';
            } else if (number >= 1000000) {
                return (number / 1000000).toFixed(1) + 'M';
            } else if (number >= 1000) {
                return (number / 1000).toFixed(1) + 'K';
            } else if ((number * 10) % 10 != 0) {
                return number.toFixed(1).toString();
            } else {
                return number.toString();
            }
        }

        if (localStorage.getItem("playthroughs")) {
            var count = parseInt(localStorage.getItem("playthroughs"));
            localStorage.setItem("playthroughs", count + 1);
        } else {
            localStorage.setItem("playthroughs", 1);
        }
    </script>
</head>

<body>
    <div id="screenfilter" class="screenfilter screenfilter_unpaused">
    </div>
    <div id="screen" class="cell_div">
    </div>
    <div id="background_img">
    </div>

    <div id="left_block">
        <div class="cell_div">
            <a href="javascript:pause();"><span id="pause">PAUSE</span></a> -
            Speed <a href="javascript:speed();"><span id="speed">x1</span></a> -
            <a href="difficulty.html">retry</a>
        </div>

        <div class="cell_div">
            <span id="date"></span><br />
            WIN if humanity survives until 2150
            <span id="timer"></span>
        </div>

        <div class="cell_div">
            $ignaling..: +$<span id="s_points" class="number number_good"></span>(+<span id="s_income"></span>$/s)
            <span class="hide_confirmation">
                <br />
                $train.....: -$<span id="c_points" class="number number_bad"></span><br />
                ---------------------------<br />
                $uffering..: -$<span id="differencial" class="number"></span>
            </span>
        </div>

        <div class="cell_div hide_normalization">
            $uffering kills ($100 = 1 life)<br />

            Next alert:
            <input type="range" min="0" max="0" value="0" id="compassion_slider" oninput="changeCompassionSlider()"
                disabled="true" style="width:60px"> <span id="compassion_fade">1</span> deaths<br />

            <span id="disaster"></span>
        </div>

        <div class="cell_div hide_normalization">

            Population: <span id="population"></span><br />
            LOSE if it reaches 0
        </div>
    </div>


    <div id="right_block">
        <div class="cell_div" id="carbon_capture_div">
            <input type="button" value="Carbon capture project +1$" onclick="clicker();" />
        </div>
        <div class="cell_div" id="carbon_capture_div_alternative" style="display:none;opacity: 0.5;">
            No virtue signaling in IMPOSSIBLE mode<br />
            <input type="button" value="Carbon capture project +1$" onclick="clicker();" disabled="true" />
        </div>

        <div class="cell_div">
            <h3>Current portfolio</h3>
            <ul id="portfolio">
            </ul>
        </div>

        <div class="cell_div">
            <h3>Marketplace of ideas</h3>
            Licensing fee: $<span id="licensing_fee"></span>
            <ul id="marketplace">
            </ul>
        </div>

        <div class="cell_div" id="politics_div" style="display:none;">
            <h3>Political Grand Narratives</h3>
            High cost, unpredictable results with very high potential
            <span id="politics_cooldown"></span>
            <ul id="politics">
            </ul>
        </div>
    </div>


    <div class="popup redbox" id="popup">
        <h2>ALERT</h2>
        <span id="death_report"></span><br /><br />
        <span id="compassion_slider_disclaimer" style="display:none;">You can change your threshold for compassion
            fade
            to see this less often
            with the slider on the bottom right.</span><br />
        <input type="button" value="Dismiss" onclick="dismissPopup();" />
    </div>

    <div class="popup redbox" id="popup_lose">
        <h1>DEFEAT</h1><br />
        You could not save humanity from self-annihilation :(<br />
        Bummer.<br />
        But in this simulation, contrary to real life, you get to try again!<br />
        <h2>If you struggle, consider changing the difficulty!</h2>
        <h1><a href="difficulty.html">Try again!</a></h1>
    </div>

    <div class="popup bluebox" id="popup_win">
        <h1>VICTORY</h1><br />
        Congratulations, you managed to reclaim political agency and survive the most dangerous century in the
        history
        of mankind.<br />
        Perhaps all hope is not lost after all.<br />
        Then again this is not real life.<br />
        <br />
        If you found this game interesting, please consider visiting
        <a href="https://www.yo252yo.com" target="_blank">yo252yo.com</a>
        for more free experimental multimedia projects!
    </div>


    <script src="game_points.js" defer></script>
    <script src="game_actions.js" defer></script>
    <script src="game_io.js" defer></script>

</body>

</html>